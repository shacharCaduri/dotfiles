[user]
    # Use environment variables for name and email
    name = $GIT_USER_NAME
    email = $GIT_USER_EMAIL

[core]
    # Global gitignore
    excludesfile = ~/.gitignore_global
    
    # Better diff handling for non-ASCII characters
    quotepath = false
    
    # Use VS Code as default editor, fallback to environment variable or vim
    editor = ${GIT_EDITOR:-code --wait}

[alias]
    # Simplified Shortcuts
    co = checkout
    br = branch
    ci = commit
    st = status
    
    # Advanced Navigation and History
    # Show branches in a nice, graphical log
    tree = log --graph --decorate --pretty=oneline --abbrev-commit
    
    # Show last commit
    last = log -1 HEAD
    
    # Powerful Workflow Aliases
    # Switch to a branch, pull latest, then switch back
    sync = "!f() { \
        current=$(git symbolic-ref --short HEAD); \
        git checkout ${1:-${GIT_DEFAULT_BRANCH:-main}}; \
        git pull; \
        git checkout $current; \
    }; f"
    
    # Interactive rebase of last N commits
    recommit = "!f() { git rebase -i HEAD~${1:-1}; }; f"
    
    # Undo last commit, keeping changes
    oops = reset HEAD~1 --mixed
    
    # Quick commit with message
    cm = "!f() { git commit -m \"$1\"; }; f"
    
    # Amend last commit without changing message
    amend = commit --amend --no-edit
    
    # Delete all merged branches except main/master
    cleanup = "!git branch --merged | egrep -v \"(^\\*|${GIT_MAIN_BRANCH:-main}|${GIT_MASTER_BRANCH:-master})\" | xargs git branch -d"
    
    # Show commits in a range
    range = "!f() { git log $1..$2; }; f"
    
    # Find branches containing commit
    find-branch = "!f() { git branch -a --contains $1; }; f"
    
    # Advanced Diff and Patch Aliases
    # Show changes that are staged
    staged = diff --staged
    
    # Diff with word-level changes
    wdiff = diff --word-diff
    
    # Patch generation
    patch = !git --no-pager diff --no-color
    
    # Contribution and Review Helpers
    # List contributors by number of commits
    contributors = shortlog -sn
    
    # Show files modified in last commit
    files = diff-tree --no-commit-id --name-only -r HEAD

[pull]
    # Automatically rebase instead of merge on pull
    rebase = ${GIT_PULL_REBASE:-true}

[push]
    # Simplify pushing current branch
    default = ${GIT_PUSH_DEFAULT:-current}

[diff]
    # Detect copies as well as renames
    renames = ${GIT_DIFF_RENAMES:-copies}

[help]
    # Automatically correct and run mistyped commands
    autocorrect = ${GIT_HELP_AUTOCORRECT:-1}

[color]
    # Enable colorful output
    ui = ${GIT_COLOR_UI:-auto}

[color "branch"]
    current = ${GIT_COLOR_BRANCH_CURRENT:-yellow reverse}
    local = ${GIT_COLOR_BRANCH_LOCAL:-yellow}
    remote = ${GIT_COLOR_BRANCH_REMOTE:-green}

[color "diff"]
    meta = ${GIT_COLOR_DIFF_META:-yellow bold}
    commit = ${GIT_COLOR_DIFF_COMMIT:-green bold}
    frag = ${GIT_COLOR_DIFF_FRAG:-magenta bold}
    old = ${GIT_COLOR_DIFF_OLD:-red bold}
    new = ${GIT_COLOR_DIFF_NEW:-green bold}

[color "status"]
    added = ${GIT_COLOR_STATUS_ADDED:-yellow}
    changed = ${GIT_COLOR_STATUS_CHANGED:-green}
    untracked = ${GIT_COLOR_STATUS_UNTRACKED:-red}
